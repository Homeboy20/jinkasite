# Upsell & Related Products - System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         PRODUCT DETAIL PAGE                              â”‚
â”‚                         (product-detail.php)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ Loads product
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ProductRelationships Class                            â”‚
â”‚                 (includes/ProductRelationships.php)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚               â”‚               â”‚
                    â–¼               â–¼               â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   RELATED    â”‚ â”‚   UPSELLS    â”‚ â”‚ ACCESSORIES  â”‚
         â”‚   Products   â”‚ â”‚   Products   â”‚ â”‚   Products   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚               â”‚               â”‚
                    â”‚               â”‚               â”‚
        getAllRecommendations($id, $type, $limit)
                    â”‚               â”‚               â”‚
                    â–¼               â–¼               â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚          RECOMMENDATION ENGINE                  â”‚
         â”‚                                                  â”‚
         â”‚  Step 1: Get Manual Relationships                â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
         â”‚  â”‚  SELECT FROM product_relationships         â”‚ â”‚
         â”‚  â”‚  WHERE product_id = X                      â”‚ â”‚
         â”‚  â”‚  AND relationship_type = 'related'         â”‚ â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
         â”‚                      â”‚                          â”‚
         â”‚                      â–¼                          â”‚
         â”‚          Have enough products?                  â”‚
         â”‚                   /    \                        â”‚
         â”‚                 YES     NO                      â”‚
         â”‚                  â”‚       â”‚                      â”‚
         â”‚                  â”‚       â–¼                      â”‚
         â”‚                  â”‚  Step 2: Get Smart Recommendations
         â”‚                  â”‚       â”‚                      â”‚
         â”‚                  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
         â”‚                  â”‚  â”‚ Algorithm Priority:    â”‚ â”‚
         â”‚                  â”‚  â”‚ 1. Same Category       â”‚ â”‚
         â”‚                  â”‚  â”‚ 2. Price Range Â±30%    â”‚ â”‚
         â”‚                  â”‚  â”‚ 3. Featured Products   â”‚ â”‚
         â”‚                  â”‚  â”‚ 4. In Stock Only       â”‚ â”‚
         â”‚                  â”‚  â”‚ 5. Recent Products     â”‚ â”‚
         â”‚                  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
         â”‚                  â”‚       â”‚                      â”‚
         â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚
         â”‚                          â–¼                      â”‚
         â”‚                Merge & Remove Duplicates        â”‚
         â”‚                          â”‚                      â”‚
         â”‚                          â–¼                      â”‚
         â”‚                    Limit to N items             â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚            DATABASE QUERIES                     â”‚
         â”‚                                                  â”‚
         â”‚  Manual Relationships Query:                    â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
         â”‚  â”‚ SELECT p.*, pr.relationship_type           â”‚ â”‚
         â”‚  â”‚ FROM product_relationships pr              â”‚ â”‚
         â”‚  â”‚ JOIN products p ON pr.related_product_id   â”‚ â”‚
         â”‚  â”‚ WHERE pr.product_id = ?                    â”‚ â”‚
         â”‚  â”‚ AND pr.is_active = 1                       â”‚ â”‚
         â”‚  â”‚ AND p.is_active = 1                        â”‚ â”‚
         â”‚  â”‚ ORDER BY pr.display_order                  â”‚ â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
         â”‚                                                  â”‚
         â”‚  Smart Recommendations Query:                   â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
         â”‚  â”‚ SELECT p.* FROM products p                 â”‚ â”‚
         â”‚  â”‚ WHERE p.id != ?                            â”‚ â”‚
         â”‚  â”‚ AND p.is_active = 1                        â”‚ â”‚
         â”‚  â”‚ AND p.stock_quantity > 0                   â”‚ â”‚
         â”‚  â”‚ AND (p.category_id = ?                     â”‚ â”‚
         â”‚  â”‚      OR p.price_kes BETWEEN ? AND ?)       â”‚ â”‚
         â”‚  â”‚ ORDER BY                                   â”‚ â”‚
         â”‚  â”‚   CASE category_match THEN 1 ELSE 2,       â”‚ â”‚
         â”‚  â”‚   p.is_featured DESC,                      â”‚ â”‚
         â”‚  â”‚   price_proximity ASC                      â”‚ â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚              FRONTEND DISPLAY                   â”‚
         â”‚                                                  â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
         â”‚  â”‚  ğŸ’¡ YOU MAY ALSO LIKE (Related)          â”‚  â”‚
         â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”       â”‚  â”‚
         â”‚  â”‚  â”‚Prod1â”‚ â”‚Prod2â”‚ â”‚Prod3â”‚ â”‚Prod4â”‚       â”‚  â”‚
         â”‚  â”‚  â”‚ IMG â”‚ â”‚ IMG â”‚ â”‚ IMG â”‚ â”‚ IMG â”‚       â”‚  â”‚
         â”‚  â”‚  â”‚ $99 â”‚ â”‚$149 â”‚ â”‚$199 â”‚ â”‚$249 â”‚       â”‚  â”‚
         â”‚  â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜       â”‚  â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
         â”‚                                                  â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
         â”‚  â”‚  â¬†ï¸ UPGRADE YOUR CHOICE (Upsells)        â”‚  â”‚
         â”‚  â”‚  Blue Gradient Background                 â”‚  â”‚
         â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”               â”‚  â”‚
         â”‚  â”‚  â”‚Prem1â”‚ â”‚Prem2â”‚ â”‚Prem3â”‚               â”‚  â”‚
         â”‚  â”‚  â”‚ IMG â”‚ â”‚ IMG â”‚ â”‚ IMG â”‚               â”‚  â”‚
         â”‚  â”‚  â”‚$399 â”‚ â”‚$499 â”‚ â”‚$599 â”‚               â”‚  â”‚
         â”‚  â”‚  â”‚+$100â”‚ â”‚+$200â”‚ â”‚+$300â”‚               â”‚  â”‚
         â”‚  â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜               â”‚  â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
         â”‚                                                  â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
         â”‚  â”‚  ğŸ”§ COMPLETE YOUR SETUP (Accessories)    â”‚  â”‚
         â”‚  â”‚  Gold Gradient Background                 â”‚  â”‚
         â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”               â”‚  â”‚
         â”‚  â”‚  â”‚Acc1 â”‚ â”‚Acc2 â”‚ â”‚Acc3 â”‚               â”‚  â”‚
         â”‚  â”‚  â”‚ IMG â”‚ â”‚ IMG â”‚ â”‚ IMG â”‚               â”‚  â”‚
         â”‚  â”‚  â”‚ $29 â”‚ â”‚ $49 â”‚ â”‚ $79 â”‚               â”‚  â”‚
         â”‚  â”‚  â”‚[+ADD]â”‚ â”‚[+ADD]â”‚ â”‚[+ADD]â”‚            â”‚  â”‚
         â”‚  â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜               â”‚  â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ADMIN   â”‚
â”‚  PANEL   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚ Adds manual relationships
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ product_relationships   â”‚
â”‚ â”Œâ”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 1 â”‚  5  â”‚ related  â”‚ â”‚
â”‚ â”‚ 1 â”‚  8  â”‚ upsell   â”‚ â”‚
â”‚ â”‚ 1 â”‚ 12  â”‚ accessoryâ”‚ â”‚
â”‚ â””â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ Customer visits product page
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Product Detail Page    â”‚
â”‚  "Plotter Model X"      â”‚
â”‚  (ID: 1)                â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ PHP: $relationships->getAllRecommendations(1, 'related', 6)
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ProductRelationships Class     â”‚
â”‚                                  â”‚
â”‚  1. Query manual relationships  â”‚
â”‚     Found: 2 products            â”‚
â”‚                                  â”‚
â”‚  2. Need 4 more (limit is 6)    â”‚
â”‚     Run smart algorithm          â”‚
â”‚     Found: 10 products           â”‚
â”‚     Take top 4                   â”‚
â”‚                                  â”‚
â”‚  3. Merge results                â”‚
â”‚     [5, 8, 15, 18, 22, 24]      â”‚
â”‚                                  â”‚
â”‚  4. Return array of products     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend Rendering             â”‚
â”‚                                  â”‚
â”‚  foreach ($recommendations) {    â”‚
â”‚    Display product card          â”‚
â”‚    - Image                       â”‚
â”‚    - Name                        â”‚
â”‚    - Price                       â”‚
â”‚    - Add to Cart button          â”‚
â”‚  }                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Customer sees:                  â”‚
â”‚  âœ“ 2 manually selected products  â”‚
â”‚  âœ“ 4 smart recommendations       â”‚
â”‚  âœ“ Beautiful grid layout         â”‚
â”‚  âœ“ Interactive hover effects     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Smart Recommendation Algorithm

```
Input: Product ID = 1, Type = 'related', Limit = 6

Step 1: Get Product Details
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Product 1                  â”‚
â”‚ Name: "Plotter Model X"    â”‚
â”‚ Category: 3 (Plotters)     â”‚
â”‚ Price: KES 50,000         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 2: Calculate Price Range
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Min: 50,000 Ã— 0.7 = 35,000â”‚
â”‚ Max: 50,000 Ã— 1.3 = 65,000â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 3: Query Database
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Criteria:                               â”‚
â”‚ âœ“ NOT the same product (id != 1)      â”‚
â”‚ âœ“ Active products only                 â”‚
â”‚ âœ“ In stock (quantity > 0)              â”‚
â”‚ âœ“ Category = 3 OR Price 35k-65k       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 4: Sort Results
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Priority 1: Same category (3)          â”‚
â”‚   Products: [5, 8, 12, 15]             â”‚
â”‚                                         â”‚
â”‚ Priority 2: Price range match          â”‚
â”‚   Products: [18, 22, 24, 29]           â”‚
â”‚                                         â”‚
â”‚ Priority 3: Featured first             â”‚
â”‚   Reorder: [5, 15, 8, 12, 18, 22...]  â”‚
â”‚                                         â”‚
â”‚ Priority 4: Price proximity            â”‚
â”‚   Fine-tune order by closest price     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 5: Apply Limit
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Take first 6 products:     â”‚
â”‚ [5, 15, 8, 12, 18, 22]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 6: Return Results
```

## Relationship Types Explained

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RELATIONSHIP TYPES                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. RELATED (similar products)                             â”‚
â”‚     Example: Plotter Model A â†’ Plotter Model B            â”‚
â”‚     Use: "Customers also viewed"                           â”‚
â”‚                                                             â”‚
â”‚  2. UPSELL (premium alternative)                           â”‚
â”‚     Example: Basic Plotter â†’ Professional Plotter          â”‚
â”‚     Use: "Upgrade for better features"                     â”‚
â”‚     Display: Shows price difference                        â”‚
â”‚                                                             â”‚
â”‚  3. CROSS_SELL (complementary)                             â”‚
â”‚     Example: Laptop â†’ Laptop Bag                           â”‚
â”‚     Use: "Frequently bought together"                      â”‚
â”‚                                                             â”‚
â”‚  4. ACCESSORY (required/optional add-on)                   â”‚
â”‚     Example: Plotter â†’ Ink Cartridge                       â”‚
â”‚     Use: "Complete your setup"                             â”‚
â”‚     Display: Quick-add button                              â”‚
â”‚                                                             â”‚
â”‚  5. BUNDLE (package deal)                                  â”‚
â”‚     Example: Plotter + Stand + Ink                         â”‚
â”‚     Use: "Buy together and save"                           â”‚
â”‚     Future: Automatic discount                             â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Database Schema Visualization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           products (existing table)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)  â”‚ 1, 2, 3, 4, 5, 6...                 â”‚
â”‚ name     â”‚ "Plotter X", "Plotter Y"...         â”‚
â”‚ price    â”‚ 50000, 75000, 100000...             â”‚
â”‚ category â”‚ 1, 2, 3, 4...                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                              â–²
     â”‚ FK: product_id               â”‚ FK: related_product_id
     â–¼                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        product_relationships (new table)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)  â”‚ Auto increment                       â”‚
â”‚ product_idâ”‚ Foreign key â†’ products.id           â”‚
â”‚ related_product_id â”‚ Foreign key â†’ products.idâ”‚
â”‚ type     â”‚ related/upsell/accessory/...        â”‚
â”‚ order    â”‚ 1, 2, 3... (display order)          â”‚
â”‚ active   â”‚ 1 (enabled), 0 (disabled)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Example Data:
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
â”‚ id â”‚ product_id â”‚ related_product  â”‚    type    â”‚orderâ”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚ 1  â”‚     1      â”‚        5         â”‚  related   â”‚  1  â”‚
â”‚ 2  â”‚     1      â”‚        8         â”‚  upsell    â”‚  1  â”‚
â”‚ 3  â”‚     1      â”‚       12         â”‚ accessory  â”‚  1  â”‚
â”‚ 4  â”‚     1      â”‚       15         â”‚ accessory  â”‚  2  â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜

Meaning:
- Product 1 has Product 5 as a related item
- Product 1 has Product 8 as an upsell option
- Product 1 has Products 12 & 15 as accessories
```

## CSS Architecture

```
style.css Structure:

1. Reset & Variables (lines 1-50)
2. Header & Navigation (lines 51-200)
3. Product Pages (lines 201-900)
4. Cart System (lines 901-1200)
5. â­ NEW: Upsell & Related Products (lines 1201-1550)
   â”œâ”€â”€ .upsell-products
   â”œâ”€â”€ .accessory-products
   â”œâ”€â”€ .related-products
   â”œâ”€â”€ .section-header
   â”œâ”€â”€ .products-grid
   â”œâ”€â”€ .product-card
   â”œâ”€â”€ .product-badge
   â”œâ”€â”€ .product-image-container
   â”œâ”€â”€ .product-info
   â”œâ”€â”€ .product-actions
   â””â”€â”€ @media queries (responsive)
6. Footer (lines 1551+)
```

This visual documentation helps understand how all the pieces work together!
